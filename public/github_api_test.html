<!DOCTYPE html>
<html>
<head>
	<title>testing 1.. 2.. 3..</title>
	<link rel="stylesheet" href="css/cyborg.css">
</head>
<body>
	<ul class="nav nav-tabs nav-justified">
	</ul>
	<div class="tab-content">
 	</div>
	<div id="projects"></div>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script src="js/moment.js"></script>
	<!-- 	<script src="/js/github_query.js" type="text/javascript"></script> -->
	<script type="text/javascript">
	(function(){

	$.getJSON("https://api.github.com/users/gavinv/repos?access_token=d63d90d4c42908acd716a3eeabb205af9c57ff85", function(data) {

		console.log(data, 'repos');
	}).done(function(data) {
		data.forEach(function(repository) {
			$.getJSON("https://api.github.com/repos/gavinv/" + repository.name + "/commits?access_token=d63d90d4c42908acd716a3eeabb205af9c57ff85", function(commits) {
				console.log(commits, 'commits');
				var commitsString = '<div role="tabpanel" class="tab-pane fade" id="repository-' + repository.id + '">';
				for(var i = 0; i < 3; i++){
					commitsString += '<b>Committed on:</b> ' + moment(commits[i].commit.committer.date).format("MMM Do YYYY");
					commitsString += '<table class="table table-hover">';
					commitsString += '<tbody>';
					commitsString += '<tr class="active">';
					commitsString += '<td>';
					commitsString += '<img alt="@gavinv" class="avatar" height="36" src="https://avatars0.githubusercontent.com/u/19418247?v=3&amp;s=72" width="36">';
					commitsString += '</td>';
					commitsString += '<td>';
					commitsString += '<div class="message">';
					commitsString += commits[i].commit.message;
					commitsString += '</div>';
					commitsString += '<div class="author">';
					commitsString += '<small><a href="' + commits[i].committer.html_url + '">' + commits[i].committer.login + '</a> committed ' + moment(commits[i].commit.committer.date).fromNow() + '</small>';
					commitsString += '</div>';
					commitsString += '</td>';
					commitsString += '</tr>';
					commitsString += '</tbody></table>'
				}	
				commitsString += '</div>';
				$('.tab-content').append(commitsString);
			})
			var tabsString = '';
			tabsString += '<li role="presentation" role="tab" data-toggle="tab"><a href="#repository-' + repository.id + '">' + repository.name + '</a></li>';
			$('.nav').append(tabsString);
			$('.nav a').click(function (e) {
			  e.preventDefault()
			  $(this).tab('show')
			})
		});
	})


	})();
</script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
</body>
</html>